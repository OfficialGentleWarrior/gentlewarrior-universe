<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gentle Warrior Universe</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#061d14;
  color:#fff;
  font-family:sans-serif;
  margin:0;
}
header {
  padding:16px;
  display:flex;
  align-items:center;
}
header img {
  width:48px;
  height:48px;
  margin-right:12px;
}
nav {
  display:flex;
  justify-content:center;
  margin:10px;
}
nav button {
  background:#0b3024;
  color:#aaffaa;
  border:none;
  padding:10px 16px;
  border-radius:20px;
  margin:0 5px;
}
nav button.active {
  background:#9de27d;
  color:#003800;
}
.panel {
  display:none;
  padding:16px;
}
.panel.active {
  display:block;
}
.card {
  background:#0a2b21;
  padding:12px;
  border-radius:14px;
  margin-bottom:12px;
}
.grid {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
.symbol-card {
  background:#0a2b21;
  padding:10px;
  border-radius:14px;
  text-align:center;
}
.symbol-card img {
  width:64px;
}
button.action {
  margin-top:10px;
  background:#9de27d;
  color:#063;
  padding:8px 14px;
  border:none;
  border-radius:16px;
}
#gameGrid {
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
  margin-top:10px;
}
.card-tile {
  background:#04140e;
  height:70px;
  border-radius:10px;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:28px;
  cursor:pointer;
}
.hidden {
  visibility:hidden;
}
footer {
  text-align:center;
  padding:10px;
  font-size:12px;
}
</style>
</head>

<body>

<header>
<img src="warrior-flappy.png">
<div>
<b>Gentle Warrior Universe</b><br>
<small>Soft heart. Strong spirit.</small>
</div>
</header>

<div class="card">
The official contract address will be posted here, on X and Telegram only. Beware of fakes.
</div>

<nav>
<button onclick="showPanel('home')" class="active" id="homeTab">Home</button>
<button onclick="showPanel('symbols')" id="symbolTab">Symbols</button>
<button onclick="showPanel('game')" id="gameTab">Game</button>
</nav>

<!-- HOME -->
<section id="home" class="panel active">
<div class="card">
<b>Welcome to Gentle Warrior.</b><br>
Play. Remember. Compete weekly.
</div>

<div class="card">
<b>Top 3 (Latest Week)</b>
<div id="top3Box">No results yet.</div>
</div>
</section>

<!-- SYMBOLS -->
<section id="symbols" class="panel">
<h2>The Six Symbols</h2>
<div class="grid">

<div class="symbol-card" data-name="Aurelion"
 data-lore="Light and leadership â€” a gentle sun that leads without burning.">
<img src="symbol-aurelion.png"><br>Aurelion<br><small>Light, leadership</small>
</div>

<div class="symbol-card" data-name="Gaialune"
 data-lore="Nature and healing â€” roots that hold, leaves that shelter.">
<img src="symbol-gaialune.png"><br>Gaialune<br><small>Nature, healing</small>
</div>

<div class="symbol-card" data-name="Ignara"
 data-lore="Passion and will â€” fire that chooses courage over rage.">
<img src="symbol-ignara.png"><br>Ignara<br><small>Passion, will</small>
</div>

<div class="symbol-card" data-name="Solyndra"
 data-lore="Guidance and hope â€” starlight through dark paths.">
<img src="symbol-solyndra.png"><br>Solyndra<br><small>Guidance, hope</small>
</div>

<div class="symbol-card" data-name="Umbrath"
 data-lore="Mystery and protection â€” a shadow that guards.">
<img src="symbol-umbrath.png"><br>Umbrath<br><small>Mystery, protection</small>
</div>

<div class="symbol-card" data-name="Zeratheon"
 data-lore="Strength and justice â€” thunder in defense of the weak.">
<img src="symbol-zeratheon.png"><br>Zeratheon<br><small>Strength, justice</small>
</div>

</div>
</section>

<!-- GAME -->
<section id="game" class="panel">
<h2>Memory Game â€” Weekly Challenge</h2>

<div id="countdown"></div>

<input id="playerName" placeholder="Public name">
<button class="action" onclick="saveName()">Save</button>

<div>
<button class="action" onclick="startGame()">Start</button>
<button class="action" onclick="resetGame()">Reset</button>
</div>

<p>Time: <span id="time">0</span>s | Moves: <span id="moves">0</span></p>

<div id="gameGrid" class="hidden"></div>

<div class="card">
<b>Weekly Leaderboard</b>
<div id="leaderboard">Loading leaderboard...</div>
</div>

</section>

<footer>
Gentle Warrior â€¢ 2025
</footer>

<script>
// NAV
function showPanel(id){
 document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
 document.getElementById(id).classList.add('active');
 document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
 document.getElementById(id+"Tab").classList.add('active');
}

// SYMBOL POPUP FIX
document.querySelectorAll('.symbol-card').forEach(card=>{
 card.onclick=()=>{
  alert(card.dataset.name+"\n\n"+card.dataset.lore);
 };
});

// SEASON SYSTEM (DO NOT CHANGE STRUCTURE)
function getSeasonID(){
 const now=new Date();
 const monday=new Date(now);
 monday.setUTCHours(0,0,0,0);
 monday.setUTCDate(now.getUTCDate()-((now.getUTCDay()+6)%7));
 return monday.toISOString().slice(0,10);
}

// COUNTDOWN
function updateCountdown(){
 const now=new Date();
 const next=new Date();
 next.setUTCDate(now.getUTCDate()+((8-now.getUTCDay())%7));
 next.setUTCHours(0,0,0,0);
 let diff=(next-now)/1000;
 const d=Math.floor(diff/86400);diff%=86400;
 const h=Math.floor(diff/3600);diff%=3600;
 const m=Math.floor(diff/60);
 const s=Math.floor(diff%60);
 document.getElementById("countdown").innerText=
 "Next season: "+d+"d "+h+"h "+m+"m "+s+"s (UTC)";
}
setInterval(updateCountdown,1000);updateCountdown();

// GAME STATE
let timer=0,moves=0,interval=null,tiles=[];
const grid=document.getElementById("gameGrid");

function startGame(){
 resetGame();
 grid.classList.remove("hidden");
 tiles=["ðŸ’š","ðŸ’š","ðŸ”¥","ðŸ”¥","ðŸŒ™","ðŸŒ™","âš¡","âš¡","ðŸŒ±","ðŸŒ±","âœ¨","âœ¨"];
 tiles.sort(()=>Math.random()-0.5);
 grid.innerHTML="";
 tiles.forEach(sym=>{
  const d=document.createElement("div");
  d.className="card-tile";
  d.textContent="â“";
  d.onclick=()=>flip(d,sym);
  grid.appendChild(d);
 });
 interval=setInterval(()=>document.getElementById("time").innerText=++timer,1000);
}

function resetGame(){
 clearInterval(interval);
 timer=0;moves=0;
 document.getElementById("time").innerText=0;
 document.getElementById("moves").innerText=0;
 grid.innerHTML="";
 grid.classList.add("hidden");
}

// SIMPLE MATCHING
let open=[];
function flip(tile,val){
 if(tile.textContent!=="â“")return;
 tile.textContent=val;
 open.push(tile);
 if(open.length==2){
  moves++; document.getElementById("moves").innerText=moves;
  if(open[0].textContent!==open[1].textContent){
   setTimeout(()=>{open.forEach(t=>t.textContent="â“");open=[];},600);
  } else {
   open=[];
   if([...document.querySelectorAll('.card-tile')].every(t=>t.textContent!=="â“")){
    victory();
   }
  }
 }
}

// NAME
function saveName(){
 localStorage.setItem("gwName",document.getElementById("playerName").value);
}
document.getElementById("playerName").value=localStorage.getItem("gwName")||"";

// LEADERBOARD
function saveScore(){
 const season=getSeasonID();
 const name=localStorage.getItem("gwName")||"Anonymous";
 const lb=JSON.parse(localStorage.getItem("lb_"+season)||"[]");
 lb.push({name,moves,time:timer});
 lb.sort((a,b)=>a.moves-b.moves||a.time-b.time);
 localStorage.setItem("lb_"+season,JSON.stringify(lb.slice(0,10)));
 renderBoard();
}

function renderBoard(){
 const season=getSeasonID();
 const lb=JSON.parse(localStorage.getItem("lb_"+season)||"[]");
 let text="";
 lb.forEach((e,i)=>text+=`#${i+1} ${e.name} â€¢ ${e.moves} moves â€¢ ${e.time}s<br>`);
 document.getElementById("leaderboard").innerHTML=text||"No scores yet.";
 if(lb.length){
   const top3=lb.slice(0,3).map((e,i)=>`#${i+1} ${e.name} (${e.moves}/${e.time}s)`).join("<br>");
   document.getElementById("top3Box").innerHTML=top3;
 }
}
renderBoard();

// WIN
function victory(){
 clearInterval(interval);
 saveScore();
 alert("Victory recorded!");
}

</script>

</body>
</html>
