<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Gentle Warrior — Memory Game</title>

<style>
    :root {
        --bg: #0a1f16;
        --card-bg: #123528;
        --accent: #8be07e;
        --white: #ffffff;
        --muted: #a8bfae;
        --radius: 14px;
    }
    * { box-sizing: border-box; }
    body {
        margin: 0;
        padding: 24px;
        background: linear-gradient(180deg, #06140f, #0a251c 80%);
        font-family: Arial, sans-serif;
        color: var(--white);
        display: flex;
        justify-content: center;
    }

    .wrap { max-width: 860px; width: 100%; }

    header {
        text-align: center;
        margin-bottom: 20px;
    }
    .hero-img {
        width: 120px;
        height: 120px;
        border-radius: 18px;
        overflow: hidden;
        margin: 0 auto 12px;
        box-shadow: 0 6px 15px rgba(0,0,0,0.5);
    }
    .hero-img img { width: 100%; height: 100%; object-fit: cover; }

    h1 { margin: 0; font-size: 26px; }
    .tag { color: var(--muted); font-size: 14px; margin-top: 4px; }

    .controls {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin: 16px 0;
        flex-wrap: wrap;
    }
    .btn {
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(255,255,255,0.12);
        padding: 10px 18px;
        color: var(--white);
        border-radius: 12px;
        cursor: pointer;
        font-weight: bold;
    }

    .stats {
        text-align: center;
        margin-top: 10px;
        color: var(--muted);
        font-size: 14px;
    }

    .board-wrap {
        background: var(--card-bg);
        padding: 20px;
        border-radius: 18px;
        box-shadow: inset 0 -15px 40px rgba(0,0,0,0.4);
    }

    .board {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 14px;
    }
    @media (min-width: 700px) {
        .board { grid-template-columns: repeat(4, 1fr); }
    }

    .card {
        position: relative;
        aspect-ratio: 4/5;
        perspective: 1000px;
        cursor: pointer;
    }
    .inner {
        position: absolute;
        inset: 0;
        border-radius: 12px;
        transform-style: preserve-3d;
        transition: 0.45s ease;
        box-shadow: 0 6px 15px rgba(0,0,0,0.5);
    }
    .card.flipped .inner { transform: rotateY(180deg); }
    .card.matched .inner { opacity: 0.6; pointer-events: none; }

    .side {
        position: absolute;
        inset: 0;
        backface-visibility: hidden;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .back img, .front img { width: 70%; }

    .front {
        transform: rotateY(180deg);
        background: rgba(255,255,255,0.03);
    }

    /* Modal */
    .modal-back {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.65);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        pointer-events: none;
        transition: 0.2s;
    }
    .modal-back.show {
        opacity: 1;
        pointer-events: auto;
    }
    .modal {
        background: #0f3a28;
        padding: 24px;
        border-radius: 18px;
        text-align: center;
        width: 90%;
        max-width: 400px;
        box-shadow: 0 15px 50px rgba(0,0,0,0.5);
    }

</style>
</head>

<body>
<div class="wrap">

    <header>
        <div class="hero-img">
            <img src="hero-portrait.jpg" alt="Gentle Warrior" />
        </div>
        <h1>Gentle Warrior — Memory Game</h1>
        <div class="tag">Soft heart. Strong spirit.</div>
    </header>

    <div class="controls">
        <button id="playBtn" class="btn">Play</button>
        <button id="resetBtn" class="btn">Reset</button>
    </div>

    <div class="stats">
        <span id="moves">Moves: 0</span> • <span id="time">Time: 0s</span>
    </div>

    <div class="board-wrap">
        <div class="board" id="board"></div>
    </div>

</div>

<!-- MODAL -->
<div class="modal-back" id="modal">
    <div class="modal">
        <h2>Victory!</h2>
        <p id="modal-text"></p>
        <button id="modal-replay" class="btn">Play Again</button>
    </div>
</div>

<script>
/* === Config === */
const CARD_BACK = "card-back.png";
const symbols = [
    "symbol-aurelion.png",
    "symbol-gaialune.png",
    "symbol-ignara.png",
    "symbol-solyndra.png",
    "symbol-umbrath.png",
    "symbol-zeratheon.png"
];

const boardEl = document.getElementById("board");
const movesEl = document.getElementById("moves");
const timeEl = document.getElementById("time");
const modal = document.getElementById("modal");
const modalReplay = document.getElementById("modal-replay");
const modalText = document.getElementById("modal-text");

let deck = [];
let first = null;
let second = null;
let lock = false;
let moves = 0;
let matches = 0;
let timer = null;
let seconds = 0;

function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

function buildDeck() {
    let arr = symbols.concat(symbols);
    shuffle(arr);
    deck = arr.map((src, id) => ({ id, src }));
}

function renderBoard() {
    boardEl.innerHTML = "";
    deck.forEach(card => {
        let el = document.createElement("div");
        el.className = "card";
        el.dataset.src = card.src;

        el.innerHTML = `
            <div class="inner">
                <div class="side back"><img src="${CARD_BACK}"></div>
                <div class="side front"><img src="${card.src}"></div>
            </div>
        `;

        el.addEventListener("click", () => flipCard(el));
        boardEl.appendChild(el);
    });
}

function flipCard(card) {
    if (lock) return;
    if (card.classList.contains("flipped")) return;
    
    card.classList.add("flipped");

    if (!first) { first = card; return; }
    second = card;
    lock = true;
    moves++;
    updateStats();

    setTimeout(checkMatch, 450);
}

function checkMatch() {
    if (first.dataset.src === second.dataset.src) {
        first.classList.add("matched");
        second.classList.add("matched");
        matches++;

        if (matches === symbols.length) endGame();
        
    } else {
        first.classList.remove("flipped");
        second.classList.remove("flipped");
    }
    first = second = null;
    lock = false;
}

function startGame() {
    reset();
    buildDeck();
    renderBoard();
    startTimer();
}

function reset() {
    first = second = null;
    lock = false;
    matches = 0;
    moves = 0;
    seconds = 0;
    updateStats();
    stopTimer();
}

function endGame() {
    stopTimer();
    modalText.textContent = `Completed in ${moves} moves and ${seconds} seconds.`;
    modal.classList.add("show");
}

function hideModal() {
    modal.classList.remove("show");
}

function updateStats() {
    movesEl.textContent = "Moves: " + moves;
    timeEl.textContent = "Time: " + seconds + "s";
}

function startTimer() {
    stopTimer();
    timer = setInterval(() => {
        seconds++;
        updateStats();
    }, 1000);
}

function stopTimer() {
    if (timer) clearInterval(timer);
}

document.getElementById("playBtn").onclick = startGame;
document.getElementById("resetBtn").onclick = startGame;
modalReplay.onclick = () => { hideModal(); startGame(); };

/* Auto-generate board on load */
buildDeck();
renderBoard();
</script>

</body>
</html>